(this.webpackJsonpredditish=this.webpackJsonpredditish||[]).push([[0],{64:function(t,e,a){},79:function(t,e,a){"use strict";a.r(e);var s,n=a(0),c=a.n(n),i=a(13),r=a.n(i),o=(a(64),a(83)),d=a(54),l=a(84),j=a(18),b=a.p+"static/media/logo.928f956d.svg",u=a(2),m=function(){return Object(u.jsxs)(o.a,{"data-testid":"navigation-container",className:"navigation-container py-3 px-0 d-flex align-items-center justify-content-between border-bottom",children:[Object(u.jsx)(d.a,{children:Object(u.jsx)(j.b,{className:"navigation-home-link","data-testid":"navigation-home-link",to:"/",children:Object(u.jsx)(l.a,{"data-testid":"navigation-logo",alt:"React Logo",src:b})})}),Object(u.jsxs)(d.a,{"data-testid":"navigation-right",className:"navigation-text text-right",children:[Object(u.jsx)("span",{children:"Reddit"}),Object(u.jsx)("span",{children:"ISH"})]})]})},p=a(56),h=a(85),O=function(){return Object(u.jsx)("div",{"data-testid":"submit-link-wrapper",className:"submit-link-button pb-4",children:Object(u.jsx)(j.b,{"data-testid":"submit-link",to:"/submit",children:Object(u.jsxs)(p.a,{"data-testid":"submit-link-button",className:"w-100 py-1 clearfix",variant:"outline-primary",size:"lg",children:[Object(u.jsx)(h.a,{"data-testid":"submit-link-button-icon"}),Object(u.jsx)("span",{children:"Submit Link"})]})})})},x=a(12),f=a(94),g=a(92),v=a(86),w=a(87),N=a(88),k=a(9);!function(t){t.asc="asc",t.desc="desc",t.orderby="orderby",t.page="page"}(s||(s={}));var y=Object(n.createContext)({}),S=[{timestamp:1,name:"reddit",url:"https://reddit.com",votes:2},{timestamp:2,name:"google",url:"https://google.com",votes:1},{timestamp:3,name:"twitter",url:"https://twitter.com",votes:2},{timestamp:4,name:"facebook",url:"https://facebook.com",votes:-5},{timestamp:5,name:"github",url:"https://github.com",votes:3},{timestamp:6,name:"codepen",url:"https://codepen.com",votes:2}],C=function(t){var e=Object(k.f)(),a=Object(n.useState)(JSON.parse(localStorage.getItem("posts")||JSON.stringify(S))),c=Object(x.a)(a,2),i=c[0],r=c[1],o=Object(n.useState)([]),d=Object(x.a)(o,2),l=d[0],j=d[1],b=Object(n.useState)(5),m=Object(x.a)(b,1)[0],p=function(){var t=new URLSearchParams(e.location.search),a=t.get("sort"),n=Number(t.get("page"))||1,c=i.slice();a===s.asc?c.sort((function(t,e){return t.votes-e.votes||e.timestamp-t.timestamp})):a===s.desc?c.sort((function(t,e){return e.votes-t.votes||e.timestamp-t.timestamp})):c.sort((function(t,e){return e.timestamp-t.timestamp})),c=c.slice(n*m-m,n*m),j(c),localStorage.setItem("posts",JSON.stringify(i))};return Object(n.useEffect)((function(){return p(),e.listen(p)}),[i]),Object(u.jsx)(y.Provider,{value:{posts:i,setPosts:r,filteredPosts:l,perPage:m,handleClickDeletePost:function(t){var a=i.filter((function(e){return e.timestamp!==t}));r(a);var s=new URLSearchParams(e.location.search),n=Number(s.get("page"))||1;0===(a=a.slice(n*m-m,n*m)).length&&n>1&&(s.set("page",String(n-1)),e.push({pathname:"/",search:s.toString()}))},handleClickUpvote:function(t){r(i.map((function(e){return e.timestamp===t&&(e.votes++,e.timestamp=Date.now()),e})))},handleClickDownvote:function(t){r(i.map((function(e){return e.timestamp===t&&e.votes>0&&(e.votes--,e.timestamp=Date.now()),e})))}},children:t.children})},P=function(){var t=Object(n.useContext)(y);if(void 0===t)throw new Error("usePosts must be used within a PostsProvider");return t},L=a(23),D=function(t){var e=t.timestamp,a=t.votes,s=t.name,c=t.url,i=P(),r=i.handleClickDeletePost,o=i.handleClickUpvote,d=i.handleClickDownvote,l=Object(L.useToasts)().addToast,j=Object(n.useState)(!1),b=Object(x.a)(j,2),m=b[0],h=b[1],O=function(){return h(!1)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(f.a,{"data-testid":"post-container",className:"mt-2 border post-container d-flex flex-row p-3",children:[Object(u.jsxs)("div",{"data-testid":"post-votes-container",className:"py-1 px-2 votes-container d-flex flex-column align-items-center justify-content-center border rounded",children:[Object(u.jsx)("p",{className:"m-0 h3 font-weight-bolder",children:a}),Object(u.jsx)("p",{className:"m-0",children:"POINTS"})]}),Object(u.jsxs)(f.a.Body,{className:"py-0",children:[Object(u.jsx)(f.a.Title,{"data-testid":"post-name",className:"mb-1 text-break",children:s}),Object(u.jsx)(f.a.Text,{className:"text-break","data-testid":"post-url",children:Object(u.jsxs)("a",{href:c,target:"_blank",rel:"noreferrer",children:["(",c,")"]})}),Object(u.jsxs)("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[Object(u.jsxs)("button",{"data-testid":"post-upvote-button",onClick:function(){return o(e)},className:"vote-button text-secondary border-0 bg-transparent",children:[Object(u.jsx)(v.a,{}),Object(u.jsx)("span",{children:"Up Vote"})]}),Object(u.jsxs)("button",{"data-testid":"post-downvote-button",onClick:function(){return d(e)},className:"vote-button text-secondary border-0 bg-transparent  ",children:[Object(u.jsx)(w.a,{}),Object(u.jsx)("span",{children:"Down Vote"})]})]})]}),Object(u.jsx)(N.a,{"data-testid":"post-delete-button",onClick:function(){return h(!0)},className:"remove-icon text-danger"})]}),Object(u.jsxs)(g.a,{"data-testid":"post-modal",show:m,onHide:O,children:[Object(u.jsx)(g.a.Header,{closeButton:!0,children:Object(u.jsx)(g.a.Title,{"data-testid":"post-modal-title",children:"Remove Link"})}),Object(u.jsxs)(g.a.Body,{"data-testid":"post-modal-body",children:[Object(u.jsx)("p",{children:"Do you want to remove:"}),Object(u.jsx)("h3",{children:s})]}),Object(u.jsxs)(g.a.Footer,{children:[Object(u.jsx)(p.a,{"data-testid":"post-modal-button-close",onClick:O,variant:"secondary",children:"No"}),Object(u.jsx)(p.a,{"data-testid":"post-modal-button-delete",onClick:function(){r(e),h(!1),l("".concat(s," REMOVED"),{appearance:"success",autoDismiss:!0})},variant:"primary",children:"Yes"})]})]})]})},T=a(27),F=a(91),R=a(89),I=function(){var t,e=Object(k.f)(),a=(t={},Object(T.a)(t,s.asc,Object(u.jsxs)(u.Fragment,{children:["Less Voted (A ",Object(u.jsx)(R.a,{})," Z)"]})),Object(T.a)(t,s.desc,Object(u.jsxs)(u.Fragment,{children:["Most Voted (Z ",Object(u.jsx)(R.a,{})," A)"]})),Object(T.a)(t,s.orderby,"Order By"),t),c=new URLSearchParams(e.location.search).get("sort"),i=Object(n.useState)(c||s.orderby),r=Object(x.a)(i,2),o=r[0],d=r[1],l=function(t){d(t),e.push({search:"?sort=".concat(t)})};return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(F.a,{"data-testid":"dropdown-wrapper",className:"w-50 mt-4",children:[Object(u.jsx)(F.a.Toggle,{"data-testid":"dropdown-selected",className:"w-100 border text-left d-flex align-items-center justify-content-between text-capitalize bg-transparent text-secondary",children:a[o]}),Object(u.jsxs)(F.a.Menu,{className:"w-100",children:[Object(u.jsx)(F.a.Item,{"data-testid":"dropdown-item-orderby",active:s.orderby===o,className:"text-capitalize",onClick:function(){return l(s.orderby)},children:"Order By"}),Object(u.jsxs)(F.a.Item,{"data-testid":"dropdown-item-desc",active:s.desc===o,className:"text-capitalize",onClick:function(){return l(s.desc)},children:["Most Voted (Z ",Object(u.jsx)(R.a,{})," A)"]}),Object(u.jsxs)(F.a.Item,{"data-testid":"dropdown-item-asc",active:s.asc===o,className:"text-capitalize",onClick:function(){return l(s.asc)},children:["Less Voted (A ",Object(u.jsx)(R.a,{})," Z)"]})]})]})})},U=a(95),A=function(){for(var t=Object(k.f)(),e=P(),a=e.posts,s=e.perPage,c=new URLSearchParams(t.location.search),i=Object(n.useState)(Number(c.get("page")||1)),r=Object(x.a)(i,2),o=r[0],d=r[1],l=Math.ceil(a.length/s),j=[],b=1;b<=l;b++)j.push(b);var m=function(e){var a=new URLSearchParams(t.location.search);a.set("page",String(e)),t.push({pathname:"/",search:a.toString()})};return Object(n.useEffect)((function(){return t.listen((function(){var e=new URLSearchParams(t.location.search);d(Number(e.get("page"))||1)}))}),[]),0===j.length?null:Object(u.jsxs)(U.a,{"data-testid":"pagination-wrapper",className:"mt-3 d-flex flex-row justify-content-center",children:[o>1&&Object(u.jsx)(U.a.Prev,{"data-testid":"pagination-previous",onClick:function(){return m(o-1)}}),j.map((function(t,e){return Object(u.jsx)(U.a.Item,{"data-testid":"pagination-item",active:t===o,onClick:function(){return m(t)},children:t},t)})),o<j.length&&Object(u.jsx)(U.a.Next,{"data-testid":"pagination-next",onClick:function(){return m(o+1)}})]})},E=a(57),V=function(){var t=P().filteredPosts;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(I,{}),t.map((function(t){return Object(u.jsx)(D,Object(E.a)({},t),t.timestamp)})),Object(u.jsx)(A,{})]})},B=a(58),z=a(93),M=function(){var t=P(),e=t.posts,a=t.setPosts,s=Object(n.useState)(""),c=Object(x.a)(s,2),i=c[0],r=c[1],o=Object(n.useState)(""),d=Object(x.a)(o,2),l=d[0],j=d[1],b=Object(n.useState)(!1),m=Object(x.a)(b,2),h=m[0],O=m[1],f=Object(L.useToasts)().addToast;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(z.a,{"data-testid":"form-container",className:"clearfix",noValidate:!0,validated:h,onSubmit:function(t){return t.preventDefault(),!1===t.currentTarget.checkValidity()?(t.stopPropagation(),void O(!0)):e.find((function(t){return t.url===l}))?(t.stopPropagation(),void f("".concat(i," ALREADY EXISTS"),{autoDismiss:!0})):(O(!1),a([].concat(Object(B.a)(e),[{timestamp:Date.now(),name:i,url:l,votes:0}])),r(""),j(""),void f("".concat(i," ADDED"),{appearance:"success",autoDismiss:!0}))},children:[Object(u.jsx)("h2",{className:"my-4",children:"Add a new link"}),Object(u.jsxs)(z.a.Group,{className:"mb-3",controlId:"",children:[Object(u.jsx)(z.a.Label,{children:"Link Name"}),Object(u.jsx)(z.a.Control,{"data-testid":"form-control-name",value:i,onChange:function(t){r(t.target.value)},type:"text",placeholder:"Link Name",minLength:2,maxLength:100,required:!0}),Object(u.jsx)(z.a.Control.Feedback,{"data-testid":"name-invalid",type:"invalid",children:"Please enter a link name."})]}),Object(u.jsxs)(z.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(u.jsx)(z.a.Label,{children:"Link URL"}),Object(u.jsx)(z.a.Control,{"data-testid":"form-control-url",value:l,onChange:function(t){j(t.target.value)},type:"url",placeholder:"Link URL",required:!0}),Object(u.jsx)(z.a.Control.Feedback,{"data-testid":"url-invalid",type:"invalid",children:"Please enter a url."})]}),Object(u.jsx)(p.a,{"data-testid":"form-submit-button",variant:"primary",type:"submit",size:"lg",className:"float-right",children:"Submit"})]})})},J=function(){return Object(u.jsxs)("div",{"data-testid":"home",className:"page-wrapper mt-5",children:[Object(u.jsx)(O,{}),Object(u.jsx)(V,{})]})},Z=a(90),H=function(){return Object(u.jsxs)("div",{"data-testid":"submit",className:"page-wrapper mt-3",children:[Object(u.jsxs)(j.b,{"data-testid":"submit-link",to:"/",className:"d-flex align-items-center font-weight-bold",children:[Object(u.jsx)(Z.a,{className:"mr-2"}),"Return to list"]}),Object(u.jsx)(M,{})]})},q=function(){return Object(u.jsx)("h1",{"data-testid":"notfound",children:"404 Not Found"})};var G=function(){return Object(u.jsx)("div",{className:"App pb-4 px-4",children:Object(u.jsxs)(j.a,{children:[Object(u.jsx)(m,{}),Object(u.jsx)(C,{children:Object(u.jsx)(L.ToastProvider,{autoDismiss:!0,autoDismissTimeout:3e3,placement:"top-center",children:Object(u.jsxs)(k.c,{children:[Object(u.jsx)(k.a,{path:"/submit",children:Object(u.jsx)(H,{})}),Object(u.jsx)(k.a,{path:"/",exact:!0,children:Object(u.jsx)(J,{})}),Object(u.jsx)(k.a,{component:q})]})})})]})})},Y=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,96)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),s(t),n(t),c(t),i(t)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(G,{})}),document.getElementById("root")),Y()}},[[79,1,2]]]);
//# sourceMappingURL=main.a21a8dbb.chunk.js.map